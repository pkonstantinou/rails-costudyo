<div class="container dashboard my-5">
  <h1>Dashboard</h1>

  <h3>My spaces</h3>
  <%= link_to 'Add new space', new_space_path %>
  <ul>
  <% current_user.owned_spaces.each do |space|%>
    <li>
      <%= link_to space.title, space_path(space) %>
      <%= link_to 'Edit', edit_space_path(space) %>
      <%= link_to 'Delete', space_path(space), method: :delete, data: {confirm: 'Are you sure?'} %>
    </li>
    </li>
  <% end %>
  </ul>

  <h3>My bookings</h3>
  <div class="row">
  <% current_user.bookings.each do |booking| %>
    <div class="col-12 col-md-6 col-lg-3 mb-4">
      <div class="card" id="my-bookings-card">
        <div class="card-body d-flex flex-column justify-content-between align-items-center">
          <% if booking.space.photos.attached? %>
            <%= cl_image_tag booking.space.photos[0].key, class: 'card-img-top p-2' %>
          <% end %>
          <p><strong><%= booking.space.title %></strong></p>
          <p>You paid: â‚¬<%= booking.space.price %> per day</p>
          <p>You booked for <%= (booking.ending_date - booking.starting_date).to_i %> days</p>
          <%= link_to "See confirmation", booking_confirmation_path(booking), class: "btn btn-flat m-2" %>
          <%= link_to 'Delete booking', booking_path(booking), method: :delete, data: {confirm: 'Are you sure?'}, class: "btn btn-flat", id: "button-warning"  %>
        </div>
      </div>
    </div>
  <% end %>
  </div>
</div>

